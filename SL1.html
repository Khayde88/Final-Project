<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">    
        <title></title>
        <style>
        h1 {text-align: center;}
        p {text-align: center;
            align-items: center;
            vertical-align: bottom;}
        div {text-align: center;
            margin-top: 15%;
            margin-bottom: 25%
        }
        /* */
        .card{
            display: inline-block ;
            align-content: center;
            align-items:center;
            vertical-align: middle;
            position: relative;
            margin: 0 auto;
        }
        button{
            display: inline-block;
            align-content: center;
            align-items:center;
            vertical-align: middle;
            position: relative;
            margin: .25rem auto;
        }
        </style>   
    </head>
    <body>
        <div class="container">
            <div id="root"></div>
        <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
        <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
        <script src=""></script>
        <div class="card" style="width: 24rem; height:36rem; border: 6px solid; border-radius: 15px;" >
            <div class="card-body" >
                <i type = "button" class= "bi bi-person-circle" style="position:absolute;top:5;left:5; font-size:2rem" onclick="window.location.href='Profile';"></i>
                <i type = "button" class="bi bi-list" style="position:absolute;top:5;right:5; font-size:2rem" onclick="window.location.href='Home';"></i>
                <label class="bi bi-search" style="font-size:2rem;position:absolute;top:50;left:10"></label>
                <input type="text" placeholder="Search location or date" style="border-radius:8px; border-color: black; border-width: 2px; border-style: rounded 8px; width: 80%; height: 2rem; margin: 0 auto; margin-top: 1rem; margin-bottom: 1rem; text-align: center; position:absolute;top:33;left:50">
                <p style="position:absolute;left:20;top:87"> <b> 26 results found. </b> </p>
            <p class="card-text">
                <br/>
                <ul class="list-group list-group-flush" id="dynamic-list"></ul>
                <script>
                    fetch('/read-saved-list')
                    .then(response => response.json())
                    .then(data => {
                        const listElement = document.getElementById('dynamic-list');
                        data.forEach(item => {
                            const listItem = document.createElement('li');
                            listItem.className = 'list-group-item';
                            listItem.innerHTML = `
                                <p>${item.date} <i type="button" class="bi bi-trash" style="float: right; font-size: 1.5rem" onclick="deleteItem('${item._id}')"></i></p>
                                <p><b>${item.stores.join(', ')}</b></p>
                                <p><label class="bi bi-geo-alt" style="font-size:1.3rem;"></label> <b>${item.location}</b></p>
                            `;
                            listElement.appendChild(listItem);
                        });
                    })
                    .catch(error => console.error('Error:', error));
                
                    function deleteItem(itemId) {
                        fetch(`/delete-saved-item/${itemId}`, {
                            method: 'DELETE'
                        })
                        .then(response => {
                            if (response.ok) {
                                location.reload(); // Reload the page to reflect the updated list
                            } else {
                                console.error('Error deleting item');
                            }
                        })
                        .catch(error => console.error('Error:', error));
                    }
                </script>
                


            </p>
            </div>
          </div>
        </div>
    </body>
</html>